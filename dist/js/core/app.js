class PortnoxTCA{constructor(){this.config=window.TCAConfig||{};this.initialized=false;this.viewManager=null;this.chartManager=null;this.sidebarManager=null;this.vendorManager=null}init(){console.log("Initializing Portnox Total Cost Analyzer...");this.viewManager=window.viewManager;this.chartManager=window.chartManager;this.sidebarManager=window.sidebarManager;this.vendorManager=window.vendorManager;if(!this.viewManager||!this.chartManager||!this.sidebarManager||!this.vendorManager){console.error("Required component managers not found");return false}this.setupEventListeners();this.createMissingVendorLogos();this.initialized=true;console.log("Portnox Total Cost Analyzer initialized successfully");return true}setupEventListeners(){document.addEventListener("vendorSelectionChange",event=>{const selectedVendors=event.detail.selectedVendors;console.log("Vendor selection changed:",selectedVendors);this.updateCharts()});document.addEventListener("configValueChange",event=>{console.log("Configuration value changed:",event.detail);this.updateCalculations()});window.addEventListener("resize",this.debounce(()=>{if(this.chartManager){this.chartManager.destroyAllCharts();this.updateCharts()}},250))}updateCharts(){const activeView=this.viewManager.activeView.secondary;this.viewManager.refreshView(activeView)}updateCalculations(){this.updateCharts()}createMissingVendorLogos(){const vendorLogos=document.querySelectorAll(".vendor-logo img");vendorLogos.forEach(logo=>{logo.onerror=function(){const vendorCard=this.closest(".vendor-select-card");const vendorId=vendorCard?vendorCard.dataset.vendor:null;const vendor=vendorId?PortnoxTCA.config.vendors[vendorId]:null;this.style.display="none";const logoContainer=this.parentElement;if(logoContainer){const text=document.createElement("span");text.className="vendor-text-logo";text.textContent=vendor?vendor.shortName:"Vendor";logoContainer.appendChild(text)}}})}debounce(func,wait){let timeout;return function(){const context=this;const args=arguments;clearTimeout(timeout);timeout=setTimeout(()=>{func.apply(context,args)},wait)}}}document.addEventListener("DOMContentLoaded",function(){window.app=new PortnoxTCA;setTimeout(()=>{window.app.init()},500)});
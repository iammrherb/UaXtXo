import{memo as e,useMemo as t,useCallback as o,createElement as n,forwardRef as i,Fragment as a,useRef as r,useEffect as l}from"react";import{usePropertyAccessor as d,useValueFormatter as b,useMotionConfig as u,Container as s,useDimensions as c,bindDefs as p,SvgWrapper as v,ResponsiveWrapper as h,degreesToRadians as f,getRelativeCursor as L,mergeRefs as g,isCursorInRect as m}from"@nivo/core";import y from"lodash/omit.js";import C from"lodash/cloneDeep.js";import x from"lodash/startCase.js";import{treemapBinary as P,treemapDice as w,treemapSlice as M,treemapSliceDice as R,treemapSquarify as S,treemap as z,hierarchy as O}from"d3-hierarchy";import{useTheme as W}from"@nivo/theming";import{useOrdinalColorScale as k,useInheritedColor as T}from"@nivo/colors";import{BasicTooltip as I,useTooltip as B}from"@nivo/tooltip";import{to as E,animated as H,useTransition as X}from"@react-spring/web";import{Text as Y,setCanvasFont as F,drawCanvasText as j}from"@nivo/text";import{jsxs as D,jsx as V,Fragment as q}from"react/jsx-runtime";function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)({}).hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},A.apply(null,arguments)}function G(e,t){if(null==e)return{};var o={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;o[n]=e[n]}return o}var J=function(e,t){return E([e,t],(function(e,t){return"translate("+e+","+t+")"}))},K=function(e,t){return E([e,t],(function(e,t){return"translate("+e+"px, "+t+"px)"}))},N=function(e,t,o){return E([e,t,o],(function(e,t,o){return"translate("+e+","+t+") rotate("+o+")"}))},Q=function(e,t,o){return E([e,t,o],(function(e,t,o){return"translate("+e+"px,"+t+"px) rotate("+o+"deg)"}))},U=function(e,t,o){return E([e,t,o],(function(e,t,o){return"translate("+(e-(0===o?0:5))+"px,"+(t-(0===o?5:0))+"px) rotate("+o+"deg)"}))},Z=e((function(e){var t=e.node,o=e.animatedProps,n=e.borderWidth,i=e.enableLabel,a=e.enableParentLabel,r=e.labelSkipSize,l=W(),d=i&&t.isLeaf&&(0===r||Math.min(t.width,t.height)>r),b=a&&t.isParent;return D(H.g,{transform:J(o.x,o.y),children:[V(H.rect,{"data-testid":"node."+t.id,width:E(o.width,(function(e){return Math.max(e,0)})),height:E(o.height,(function(e){return Math.max(e,0)})),fill:t.fill?t.fill:o.color,strokeWidth:n,stroke:t.borderColor,fillOpacity:t.opacity,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseLeave:t.onMouseLeave,onClick:t.onClick}),d&&V(Y,{"data-testid":"label."+t.id,textAnchor:"middle",dominantBaseline:"central",style:A({},l.labels.text,{fill:t.labelTextColor,pointerEvents:"none"}),fillOpacity:o.labelOpacity,transform:N(o.labelX,o.labelY,o.labelRotation),children:t.label}),b&&V(Y,{"data-testid":"parentLabel."+t.id,dominantBaseline:"central",style:A({},l.labels.text,{fill:t.parentLabelTextColor,pointerEvents:"none"}),fillOpacity:o.parentLabelOpacity,transform:N(o.parentLabelX,o.parentLabelY,o.parentLabelRotation),children:t.parentLabel})]})})),$=e((function(e){var t=e.node;return V(I,{id:t.id,value:t.formattedValue,enableChip:!0,color:t.color})})),_=e((function(e){var t=e.node,o=e.animatedProps,n=e.borderWidth,i=e.enableLabel,a=e.enableParentLabel,r=e.labelSkipSize,l=W(),d=i&&t.isLeaf&&(0===r||Math.min(t.width,t.height)>r),b=a&&t.isParent;return D(H.div,{"data-testid":"node."+t.id,id:t.path.replace(/[^\w]/gi,"-"),style:{boxSizing:"border-box",position:"absolute",top:0,left:0,transform:K(o.x,o.y),width:o.width,height:o.height,borderWidth:n,borderStyle:"solid",borderColor:t.borderColor,overflow:"hidden"},children:[V(H.div,{style:{boxSizing:"border-box",position:"absolute",top:0,left:0,opacity:t.opacity,width:o.width,height:o.height,background:o.color},onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseLeave:t.onMouseLeave,onClick:t.onClick}),d&&V(H.span,{"data-testid":"label."+t.id,style:A({},l.labels.text,{position:"absolute",display:"flex",top:-5,left:-5,width:10,height:10,justifyContent:"center",alignItems:"center",whiteSpace:"nowrap",color:t.labelTextColor,transformOrigin:"center center",transform:Q(o.labelX,o.labelY,o.labelRotation),opacity:o.labelOpacity,pointerEvents:"none"}),children:t.label}),b&&V(H.span,{"data-testid":"parentLabel."+t.id,style:A({},l.labels.text,{position:"absolute",display:"flex",justifyContent:"flex-start",alignItems:"center",whiteSpace:"nowrap",width:10,height:10,color:t.parentLabelTextColor,transformOrigin:"top left",transform:U(o.parentLabelX,o.parentLabelY,o.parentLabelRotation),opacity:o.parentLabelOpacity,pointerEvents:"none"}),children:t.parentLabel})]})})),ee={layers:["nodes"],identity:"id",value:"value",tile:"squarify",leavesOnly:!1,innerPadding:0,outerPadding:0,colors:{scheme:"nivo"},colorBy:"pathComponents.1",nodeOpacity:.33,enableLabel:!0,label:"formattedValue",labelSkipSize:0,labelTextColor:{from:"color",modifiers:[["darker",1]]},orientLabel:!0,enableParentLabel:!0,parentLabel:"id",parentLabelSize:20,parentLabelPosition:"top",parentLabelPadding:6,parentLabelTextColor:{from:"color",modifiers:[["darker",1]]},borderWidth:1,borderColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,tooltip:$,role:"img",animate:!0,motionConfig:"gentle"},te=A({},ee,{nodeComponent:Z,defs:[],fill:[]}),oe=A({},ee,{nodeComponent:_}),ne=A({},ee,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),ie={binary:P,dice:w,slice:M,sliceDice:R,squarify:S},ae=function(e){var o=e.root,n=e.getValue;return t((function(){return O(o).sum(n)}),[o,n])},re=function(e){var o=e.data,n=e.width,i=e.height,a=e.identity,r=void 0===a?ee.identity:a,l=e.value,u=void 0===l?ee.value:l,s=e.valueFormat,c=e.leavesOnly,p=void 0===c?ee.leavesOnly:c,v=e.tile,h=void 0===v?ee.tile:v,f=e.innerPadding,L=void 0===f?ee.innerPadding:f,g=e.outerPadding,m=void 0===g?ee.outerPadding:g,P=e.label,w=void 0===P?ee.label:P,M=e.orientLabel,R=void 0===M?ee.orientLabel:M,S=e.enableParentLabel,O=void 0===S?ee.enableParentLabel:S,I=e.parentLabel,B=void 0===I?ee.parentLabel:I,E=e.parentLabelSize,H=void 0===E?ee.parentLabelSize:E,X=e.parentLabelPosition,Y=void 0===X?ee.parentLabelPosition:X,F=e.parentLabelPadding,j=void 0===F?ee.parentLabelPadding:F,D=e.colors,V=void 0===D?ee.colors:D,q=e.colorBy,G=void 0===q?ee.colorBy:q,J=e.nodeOpacity,K=void 0===J?ee.nodeOpacity:J,N=e.borderColor,Q=void 0===N?ee.borderColor:N,U=e.labelTextColor,Z=void 0===U?ee.labelTextColor:U,$=e.parentLabelTextColor,_=void 0===$?ee.parentLabelTextColor:$,te=d(r),oe=d(u),ne=b(s),re=d(w),le=d(B),de=function(e){var o=e.width,n=e.height,i=e.tile,a=e.innerPadding,r=e.outerPadding,l=e.enableParentLabel,d=e.parentLabelSize,b=e.parentLabelPosition,u=e.leavesOnly;return t((function(){var e=z().size([o,n]).tile(ie[i]).round(!0).paddingInner(a).paddingOuter(r);if(l&&!u){var t=d+2*r;e["padding"+x(b)](t)}return e}),[o,n,i,a,r,l,d,b,u])}({width:n,height:i,tile:h,innerPadding:L,outerPadding:m,enableParentLabel:O,parentLabelSize:H,parentLabelPosition:Y,leavesOnly:p}),be=ae({root:o,getValue:oe}),ue=t((function(){var e=C(be);return de(e),p?e.leaves():e.descendants()}),[be,de,p]),se=t((function(){return ue.map((function(e){var t=function(e,t){var o=e.ancestors().map((function(e){return t(e.data)})).reverse();return{path:o.join("."),pathComponents:o}}(e,te),o=t.path,n=t.pathComponents,i={id:te(e.data),path:o,pathComponents:n,data:y(e.data,"children"),x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0,value:e.value,formattedValue:ne(e.value),treeDepth:e.depth,treeHeight:e.height,isParent:e.height>0,isLeaf:0===e.height,parentLabelX:0,parentLabelY:0,parentLabelRotation:0};return i.labelRotation=R&&i.height>i.width?-90:0,"top"===Y&&(i.parentLabelX=m+j,i.parentLabelY=m+H/2),"right"===Y&&(i.parentLabelX=i.width-m-H/2,i.parentLabelY=i.height-m-j,i.parentLabelRotation=-90),"bottom"===Y&&(i.parentLabelX=m+j,i.parentLabelY=i.height-m-H/2),"left"===Y&&(i.parentLabelX=m+H/2,i.parentLabelY=i.height-m-j,i.parentLabelRotation=-90),i.label=re(i),i.parentLabel=le(i),i}))}),[ue,te,ne,re,R,le,H,Y,j,m]),ce=W(),pe=k(V,G),ve=T(Q,ce),he=T(Z,ce),fe=T(_,ce),Le=t((function(){return se.map((function(e){var t=A({},e,{color:pe(e),opacity:K});return t.borderColor=ve(t),t.labelTextColor=he(t),t.parentLabelTextColor=fe(t),t}))}),[se,pe,K,ve,he,fe]);return{hierarchy:be,nodes:Le,layout:de}},le=function(e){var o=e.nodes;return t((function(){return{nodes:o}}),[o])},de=function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,color:e.color,labelX:e.width/2,labelY:e.height/2,labelRotation:e.labelRotation,labelOpacity:1,parentLabelX:e.parentLabelX,parentLabelY:e.parentLabelY,parentLabelRotation:e.parentLabelRotation,parentLabelOpacity:1}},be=function(e){return{x:e.x+e.width/2,y:e.y+e.height/2,width:0,height:0,color:e.color,labelX:0,labelY:0,labelRotation:e.labelRotation,labelOpacity:0,parentLabelX:0,parentLabelY:0,parentLabelRotation:e.parentLabelRotation,parentLabelOpacity:0}},ue=e((function(e){var i=e.nodes,a=e.nodeComponent,r=e.borderWidth,l=e.enableLabel,d=e.labelSkipSize,b=e.enableParentLabel,s=function(e,i){var a=i.isInteractive,r=i.onMouseEnter,l=i.onMouseMove,d=i.onMouseLeave,b=i.onClick,u=i.tooltip,s=B(),c=s.showTooltipFromEvent,p=s.hideTooltip,v=o((function(e,t){c(n(u,{node:e}),t,"left")}),[c,u]),h=o((function(e,t){v(e,t),null==r||r(e,t)}),[r,v]),f=o((function(e,t){v(e,t),null==l||l(e,t)}),[l,v]),L=o((function(e,t){p(),null==d||d(e,t)}),[d,p]),g=o((function(e,t){null==b||b(e,t)}),[b]);return t((function(){return e.map((function(e){return a?A({},e,{onMouseEnter:function(t){return h(e,t)},onMouseMove:function(t){return f(e,t)},onMouseLeave:function(t){return L(e,t)},onClick:function(t){return g(e,t)}}):e}))}),[a,e,h,f,L,g])}(i,{isInteractive:e.isInteractive,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,tooltip:e.tooltip}),c=u(),p=c.animate,v=c.config,h=X(s,{keys:function(e){return e.path},initial:de,from:be,enter:de,update:de,leave:be,config:v,immediate:!p});return V(q,{children:h((function(e,t){return n(a,{key:t.path,node:t,animatedProps:e,borderWidth:r,enableLabel:l,labelSkipSize:d,enableParentLabel:b})}))})})),se=["isInteractive","animate","motionConfig","theme","renderWrapper"],ce=function(e){var t=e.data,o=e.identity,i=void 0===o?te.identity:o,r=e.value,l=void 0===r?te.value:r,d=e.valueFormat,b=e.tile,u=void 0===b?te.tile:b,s=e.nodeComponent,h=void 0===s?te.nodeComponent:s,f=e.innerPadding,L=void 0===f?te.innerPadding:f,g=e.outerPadding,m=void 0===g?te.outerPadding:g,y=e.leavesOnly,C=void 0===y?te.leavesOnly:y,x=e.width,P=e.height,w=e.margin,M=e.layers,R=void 0===M?te.layers:M,S=e.colors,z=void 0===S?te.colors:S,O=e.colorBy,W=void 0===O?te.colorBy:O,k=e.nodeOpacity,T=void 0===k?te.nodeOpacity:k,I=e.borderWidth,B=void 0===I?te.borderWidth:I,E=e.borderColor,H=void 0===E?te.borderColor:E,X=e.defs,Y=void 0===X?te.defs:X,F=e.fill,j=void 0===F?te.fill:F,D=e.enableLabel,q=void 0===D?te.enableLabel:D,A=e.label,G=void 0===A?te.label:A,J=e.labelTextColor,K=void 0===J?te.labelTextColor:J,N=e.orientLabel,Q=void 0===N?te.orientLabel:N,U=e.labelSkipSize,Z=void 0===U?te.labelSkipSize:U,$=e.enableParentLabel,_=void 0===$?te.enableParentLabel:$,ee=e.parentLabel,oe=void 0===ee?te.parentLabel:ee,ne=e.parentLabelSize,ie=void 0===ne?te.parentLabelSize:ne,ae=e.parentLabelPosition,de=void 0===ae?te.parentLabelPosition:ae,be=e.parentLabelPadding,se=void 0===be?te.parentLabelPadding:be,ce=e.parentLabelTextColor,pe=void 0===ce?te.parentLabelTextColor:ce,ve=e.isInteractive,he=void 0===ve?te.isInteractive:ve,fe=e.onMouseEnter,Le=e.onMouseMove,ge=e.onMouseLeave,me=e.onClick,ye=e.tooltip,Ce=void 0===ye?te.tooltip:ye,xe=e.role,Pe=e.ariaLabel,we=e.ariaLabelledBy,Me=e.ariaDescribedBy,Re=e.forwardedRef,Se=c(x,P,w),ze=Se.margin,Oe=Se.innerWidth,We=Se.innerHeight,ke=Se.outerWidth,Te=Se.outerHeight,Ie=re({data:t,identity:i,value:l,valueFormat:d,leavesOnly:C,width:Oe,height:We,tile:u,innerPadding:L,outerPadding:m,colors:z,colorBy:W,nodeOpacity:T,borderColor:H,label:G,labelTextColor:K,orientLabel:Q,enableParentLabel:_,parentLabel:oe,parentLabelSize:ie,parentLabelPosition:de,parentLabelPadding:se,parentLabelTextColor:pe}).nodes,Be={nodes:null};R.includes("nodes")&&(Be.nodes=V(ue,{nodes:Ie,nodeComponent:h,borderWidth:B,enableLabel:q,labelSkipSize:Z,enableParentLabel:_,isInteractive:he,onMouseEnter:fe,onMouseMove:Le,onMouseLeave:ge,onClick:me,tooltip:Ce},"nodes"));var Ee=le({nodes:Ie}),He=p(Y,Ie,j);return V(v,{width:ke,height:Te,margin:ze,defs:He,role:xe,ariaLabel:Pe,ariaLabelledBy:we,ariaDescribedBy:Me,ref:Re,children:R.map((function(e,t){var o;return"function"==typeof e?V(a,{children:n(e,Ee)},t):null!=(o=null==Be?void 0:Be[e])?o:null}))})},pe=i((function(e,t){var o=e.isInteractive,n=void 0===o?te.isInteractive:o,i=e.animate,a=void 0===i?te.animate:i,r=e.motionConfig,l=void 0===r?te.motionConfig:r,d=e.theme,b=e.renderWrapper,u=G(e,se);return V(s,{animate:a,isInteractive:n,motionConfig:l,renderWrapper:b,theme:d,children:V(ce,A({},u,{isInteractive:n,forwardedRef:t}))})})),ve=["defaultWidth","defaultHeight","onResize","debounceResize"],he=i((function(e,t){var o=e.defaultWidth,n=e.defaultHeight,i=e.onResize,a=e.debounceResize,r=G(e,ve);return V(h,{defaultWidth:o,defaultHeight:n,onResize:i,debounceResize:a,children:function(e){var o=e.width,n=e.height;return V(pe,A({},r,{width:o,height:n,ref:t}))}})})),fe=["isInteractive","animate","motionConfig","theme","renderWrapper"],Le=function(e){var t=e.data,o=e.identity,i=void 0===o?oe.identity:o,r=e.value,l=void 0===r?oe.value:r,d=e.tile,b=void 0===d?oe.tile:d,u=e.nodeComponent,s=void 0===u?oe.nodeComponent:u,p=e.valueFormat,v=e.innerPadding,h=void 0===v?oe.innerPadding:v,f=e.outerPadding,L=void 0===f?oe.outerPadding:f,g=e.leavesOnly,m=void 0===g?oe.leavesOnly:g,y=e.width,C=e.height,x=e.margin,P=e.layers,w=void 0===P?te.layers:P,M=e.colors,R=void 0===M?oe.colors:M,S=e.colorBy,z=void 0===S?oe.colorBy:S,O=e.nodeOpacity,W=void 0===O?oe.nodeOpacity:O,k=e.borderWidth,T=void 0===k?oe.borderWidth:k,I=e.borderColor,B=void 0===I?oe.borderColor:I,E=e.enableLabel,H=void 0===E?oe.enableLabel:E,X=e.label,Y=void 0===X?oe.label:X,F=e.labelTextColor,j=void 0===F?oe.labelTextColor:F,D=e.orientLabel,q=void 0===D?oe.orientLabel:D,A=e.labelSkipSize,G=void 0===A?oe.labelSkipSize:A,J=e.enableParentLabel,K=void 0===J?oe.enableParentLabel:J,N=e.parentLabel,Q=void 0===N?oe.parentLabel:N,U=e.parentLabelSize,Z=void 0===U?oe.parentLabelSize:U,$=e.parentLabelPosition,_=void 0===$?oe.parentLabelPosition:$,ee=e.parentLabelPadding,ne=void 0===ee?oe.parentLabelPadding:ee,ie=e.parentLabelTextColor,ae=void 0===ie?oe.parentLabelTextColor:ie,de=e.isInteractive,be=void 0===de?oe.isInteractive:de,se=e.onMouseEnter,ce=e.onMouseMove,pe=e.onMouseLeave,ve=e.onClick,he=e.tooltip,fe=void 0===he?oe.tooltip:he,Le=e.role,ge=e.ariaLabel,me=e.ariaLabelledBy,ye=e.ariaDescribedBy,Ce=e.forwardedRef,xe=c(y,C,x),Pe=xe.margin,we=xe.innerWidth,Me=xe.innerHeight,Re=xe.outerWidth,Se=xe.outerHeight,ze=re({data:t,identity:i,value:l,valueFormat:p,leavesOnly:m,width:we,height:Me,tile:b,innerPadding:h,outerPadding:L,colors:R,colorBy:z,nodeOpacity:W,borderColor:B,label:Y,labelTextColor:j,orientLabel:q,enableParentLabel:K,parentLabel:Q,parentLabelSize:Z,parentLabelPosition:_,parentLabelPadding:ne,parentLabelTextColor:ae}).nodes,Oe={nodes:null};w.includes("nodes")&&(Oe.nodes=V(ue,{nodes:ze,nodeComponent:s,borderWidth:T,enableLabel:H,labelSkipSize:G,enableParentLabel:K,isInteractive:be,onMouseEnter:se,onMouseMove:ce,onMouseLeave:pe,onClick:ve,tooltip:fe},"nodes"));var We=le({nodes:ze});return V("div",{role:Le,"aria-label":ge,"aria-labelledby":me,"aria-describedby":ye,style:{position:"relative",width:Re,height:Se},ref:Ce,children:V("div",{style:{position:"absolute",top:Pe.top,left:Pe.left},children:w.map((function(e,t){var o;return"function"==typeof e?V(a,{children:n(e,We)},t):null!=(o=null==Oe?void 0:Oe[e])?o:null}))})})},ge=i((function(e,t){var o=e.isInteractive,n=void 0===o?oe.isInteractive:o,i=e.animate,a=void 0===i?oe.animate:i,r=e.motionConfig,l=void 0===r?oe.motionConfig:r,d=e.theme,b=e.renderWrapper,u=G(e,fe);return V(s,{animate:a,isInteractive:n,motionConfig:l,renderWrapper:b,theme:d,children:V(Le,A({},u,{isInteractive:n,forwardedRef:t}))})})),me=["defaultWidth","defaultHeight","onResize","debounceResize"],ye=i((function(e,t){var o=e.defaultWidth,n=e.defaultHeight,i=e.onResize,a=e.debounceResize,r=G(e,me);return V(h,{defaultWidth:o,defaultHeight:n,onResize:i,debounceResize:a,children:function(e){var o=e.width,n=e.height;return V(ge,A({},r,{width:o,height:n,ref:t}))}})})),Ce=["theme","isInteractive","animate","motionConfig","renderWrapper"],xe=function(e,t,o,n){return e.find((function(e){return m(e.x+t.left,e.y+t.top,e.width,e.height,o,n)}))},Pe=function(e){var t=e.data,i=e.identity,a=void 0===i?ne.identity:i,d=e.value,b=void 0===d?ne.identity:d,u=e.tile,s=void 0===u?ne.tile:u,p=e.valueFormat,v=e.innerPadding,h=void 0===v?ne.innerPadding:v,m=e.outerPadding,y=void 0===m?ne.outerPadding:m,C=e.leavesOnly,x=void 0===C?ne.leavesOnly:C,P=e.width,w=e.height,M=e.margin,R=e.colors,S=void 0===R?ne.colors:R,z=e.colorBy,O=void 0===z?ne.colorBy:z,k=e.nodeOpacity,T=void 0===k?ne.nodeOpacity:k,I=e.borderWidth,E=void 0===I?ne.borderWidth:I,H=e.borderColor,X=void 0===H?ne.borderColor:H,Y=e.enableLabel,D=void 0===Y?ne.enableLabel:Y,q=e.label,G=void 0===q?ne.label:q,J=e.labelTextColor,K=void 0===J?ne.labelTextColor:J,N=e.orientLabel,Q=void 0===N?ne.orientLabel:N,U=e.labelSkipSize,Z=void 0===U?ne.labelSkipSize:U,$=e.isInteractive,_=void 0===$?ne.isInteractive:$,ee=e.onMouseMove,te=e.onClick,oe=e.tooltip,ie=void 0===oe?ne.tooltip:oe,ae=e.pixelRatio,le=void 0===ae?ne.pixelRatio:ae,de=e.role,be=e.ariaLabel,ue=e.ariaLabelledBy,se=e.ariaDescribedBy,ce=e.forwardedRef,pe=r(null),ve=c(P,w,M),he=ve.margin,fe=ve.innerWidth,Le=ve.innerHeight,ge=ve.outerWidth,me=ve.outerHeight,ye=re({data:t,identity:a,value:b,valueFormat:p,leavesOnly:x,width:fe,height:Le,tile:s,innerPadding:h,outerPadding:y,colors:S,colorBy:O,nodeOpacity:T,borderColor:X,label:G,labelTextColor:K,orientLabel:Q,enableParentLabel:!1}).nodes,Ce=W();l((function(){if(null!==pe.current){var e=pe.current.getContext("2d");null!==e&&(pe.current.width=ge*le,pe.current.height=me*le,e.scale(le,le),e.fillStyle=Ce.background,e.fillRect(0,0,ge,me),e.translate(he.left,he.top),ye.forEach((function(t){e.fillStyle=t.color,e.fillRect(t.x,t.y,t.width,t.height),E>0&&(e.strokeStyle=t.borderColor,e.lineWidth=E,e.strokeRect(t.x,t.y,t.width,t.height))})),D&&(e.textAlign="center",e.textBaseline="middle",F(e,Ce.labels.text),ye.forEach((function(t){if(t.isLeaf&&(0===Z||Math.min(t.width,t.height)>Z)){var o=Q&&t.height>t.width;e.save(),e.translate(t.x+t.width/2,t.y+t.height/2),e.rotate(f(o?-90:0)),j(e,A({},Ce.labels.text,{fill:t.labelTextColor}),String(t.label)),e.restore()}}))))}}),[pe,ye,ge,me,fe,Le,he,E,D,Q,Z,Ce,le]);var Pe=B(),we=Pe.showTooltipFromEvent,Me=Pe.hideTooltip,Re=o((function(e){if(null!==pe.current){var t=L(pe.current,e),o=t[0],i=t[1],a=xe(ye,he,o,i);void 0!==a?(we(n(ie,{node:a}),e,"left"),null==ee||ee(a,e)):Me()}}),[pe,ye,he,we,Me,ie,ee]),Se=o((function(){Me()}),[Me]),ze=o((function(e){if(null!==pe.current){var t=L(pe.current,e),o=t[0],n=t[1],i=xe(ye,he,o,n);void 0!==i&&(null==te||te(i,e))}}),[pe,ye,he,te]);return V("canvas",{ref:g(pe,ce),width:ge*le,height:me*le,style:{width:ge,height:me},onMouseEnter:_?Re:void 0,onMouseMove:_?Re:void 0,onMouseLeave:_?Se:void 0,onClick:_?ze:void 0,role:de,"aria-label":be,"aria-labelledby":ue,"aria-describedby":se})},we=i((function(e,t){var o=e.theme,n=e.isInteractive,i=void 0===n?ne.isInteractive:n,a=e.animate,r=void 0===a?ne.animate:a,l=e.motionConfig,d=void 0===l?ne.motionConfig:l,b=e.renderWrapper,u=G(e,Ce);return V(s,{isInteractive:i,animate:r,motionConfig:d,theme:o,renderWrapper:b,children:V(Pe,A({},u,{isInteractive:i,forwardedRef:t}))})})),Me=["defaultWidth","defaultHeight","onResize","debounceResize"],Re=i((function(e,t){var o=e.defaultWidth,n=e.defaultHeight,i=e.onResize,a=e.debounceResize,r=G(e,Me);return V(h,{defaultWidth:o,defaultHeight:n,onResize:i,debounceResize:a,children:function(e){var o=e.width,n=e.height;return V(we,A({},r,{width:o,height:n,ref:t}))}})}));export{he as ResponsiveTreeMap,Re as ResponsiveTreeMapCanvas,ye as ResponsiveTreeMapHtml,pe as TreeMap,we as TreeMapCanvas,ge as TreeMapHtml,ne as canvasDefaultProps,ee as commonDefaultProps,oe as htmlDefaultProps,Q as htmlLabelTransform,K as htmlNodeTransform,U as htmlParentLabelTransform,te as svgDefaultProps,N as svgLabelTransform,J as svgNodeTransform,ie as tileByType};
//# sourceMappingURL=nivo-treemap.mjs.map

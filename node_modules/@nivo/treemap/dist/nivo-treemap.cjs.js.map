{"version":3,"file":"nivo-treemap.cjs.js","sources":["../src/transitions.ts","../src/TreeMapNode.tsx","../src/TreeMapNodeTooltip.tsx","../src/TreeMapHtmlNode.tsx","../src/defaults.ts","../src/tiling.ts","../src/hooks.ts","../src/TreeMapNodes.tsx","../src/TreeMap.tsx","../src/ResponsiveTreeMap.tsx","../src/TreeMapHtml.tsx","../src/ResponsiveTreeMapHtml.tsx","../src/TreeMapCanvas.tsx","../src/ResponsiveTreeMapCanvas.tsx"],"sourcesContent":["import { to, SpringValue } from '@react-spring/web'\n\nexport const svgNodeTransform = (x: SpringValue<number>, y: SpringValue<number>) =>\n    to([x, y], (x, y) => `translate(${x},${y})`)\n\nexport const htmlNodeTransform = (x: SpringValue<number>, y: SpringValue<number>) =>\n    to([x, y], (x, y) => `translate(${x}px, ${y}px)`)\n\nexport const svgLabelTransform = (\n    x: SpringValue<number>,\n    y: SpringValue<number>,\n    rotation: SpringValue<number>\n) => to([x, y, rotation], (x, y, rotation) => `translate(${x},${y}) rotate(${rotation})`)\n\nexport const htmlLabelTransform = (\n    x: SpringValue<number>,\n    y: SpringValue<number>,\n    rotation: SpringValue<number>\n) => to([x, y, rotation], (x, y, rotation) => `translate(${x}px,${y}px) rotate(${rotation}deg)`)\n\nexport const htmlParentLabelTransform = (\n    x: SpringValue<number>,\n    y: SpringValue<number>,\n    rotation: SpringValue<number>\n) =>\n    to(\n        [x, y, rotation],\n        (x, y, rotation) =>\n            `translate(${x - (rotation === 0 ? 0 : 5)}px,${\n                y - (rotation === 0 ? 5 : 0)\n            }px) rotate(${rotation}deg)`\n    )\n","import { memo } from 'react'\nimport { animated, to } from '@react-spring/web'\nimport { useTheme } from '@nivo/theming'\nimport { Text } from '@nivo/text'\nimport { NodeProps } from './types'\nimport { svgNodeTransform, svgLabelTransform } from './transitions'\n\nconst NonMemoizedTreeMapNode = <Datum extends object>({\n    node,\n    animatedProps,\n    borderWidth,\n    enableLabel,\n    enableParentLabel,\n    labelSkipSize,\n}: NodeProps<Datum>) => {\n    const theme = useTheme()\n\n    const showLabel =\n        enableLabel &&\n        node.isLeaf &&\n        (labelSkipSize === 0 || Math.min(node.width, node.height) > labelSkipSize)\n\n    const showParentLabel = enableParentLabel && node.isParent\n\n    return (\n        <animated.g transform={svgNodeTransform(animatedProps.x, animatedProps.y)}>\n            <animated.rect\n                data-testid={`node.${node.id}`}\n                width={to(animatedProps.width, v => Math.max(v, 0))}\n                height={to(animatedProps.height, v => Math.max(v, 0))}\n                fill={node.fill ? node.fill : animatedProps.color}\n                strokeWidth={borderWidth}\n                stroke={node.borderColor}\n                fillOpacity={node.opacity}\n                onMouseEnter={node.onMouseEnter}\n                onMouseMove={node.onMouseMove}\n                onMouseLeave={node.onMouseLeave}\n                onClick={node.onClick}\n            />\n            {showLabel && (\n                <Text\n                    data-testid={`label.${node.id}`}\n                    textAnchor=\"middle\"\n                    dominantBaseline=\"central\"\n                    style={{\n                        ...theme.labels.text,\n                        fill: node.labelTextColor,\n                        pointerEvents: 'none',\n                    }}\n                    fillOpacity={animatedProps.labelOpacity}\n                    transform={svgLabelTransform(\n                        animatedProps.labelX,\n                        animatedProps.labelY,\n                        animatedProps.labelRotation\n                    )}\n                >\n                    {node.label}\n                </Text>\n            )}\n            {showParentLabel && (\n                <Text\n                    data-testid={`parentLabel.${node.id}`}\n                    dominantBaseline=\"central\"\n                    style={{\n                        ...theme.labels.text,\n                        fill: node.parentLabelTextColor,\n                        pointerEvents: 'none',\n                    }}\n                    fillOpacity={animatedProps.parentLabelOpacity}\n                    transform={svgLabelTransform(\n                        animatedProps.parentLabelX,\n                        animatedProps.parentLabelY,\n                        animatedProps.parentLabelRotation\n                    )}\n                >\n                    {node.parentLabel}\n                </Text>\n            )}\n        </animated.g>\n    )\n}\n\nexport const TreeMapNode = memo(NonMemoizedTreeMapNode) as typeof NonMemoizedTreeMapNode\n","import { memo } from 'react'\nimport { BasicTooltip } from '@nivo/tooltip'\nimport { TooltipProps } from './types'\n\nconst NonMemoizedTreeMapNodeTooltip = <Datum extends object>({ node }: TooltipProps<Datum>) => (\n    <BasicTooltip id={node.id} value={node.formattedValue} enableChip={true} color={node.color} />\n)\n\nexport const TreeMapNodeTooltip = memo(\n    NonMemoizedTreeMapNodeTooltip\n) as typeof NonMemoizedTreeMapNodeTooltip\n","import { memo } from 'react'\nimport { animated } from '@react-spring/web'\nimport { useTheme } from '@nivo/theming'\nimport { NodeProps } from './types'\nimport { htmlNodeTransform, htmlLabelTransform, htmlParentLabelTransform } from './transitions'\n\nconst NonMemoizedTreeMapHtmlNode = <Datum extends object>({\n    node,\n    animatedProps,\n    borderWidth,\n    enableLabel,\n    enableParentLabel,\n    labelSkipSize,\n}: NodeProps<Datum>) => {\n    const theme = useTheme()\n\n    const showLabel =\n        enableLabel &&\n        node.isLeaf &&\n        (labelSkipSize === 0 || Math.min(node.width, node.height) > labelSkipSize)\n\n    const showParentLabel = enableParentLabel && node.isParent\n\n    return (\n        <animated.div\n            data-testid={`node.${node.id}`}\n            id={node.path.replace(/[^\\w]/gi, '-')}\n            style={{\n                boxSizing: 'border-box',\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                transform: htmlNodeTransform(animatedProps.x, animatedProps.y),\n                width: animatedProps.width,\n                height: animatedProps.height,\n                borderWidth,\n                borderStyle: 'solid',\n                borderColor: node.borderColor,\n                overflow: 'hidden',\n            }}\n        >\n            <animated.div\n                style={{\n                    boxSizing: 'border-box',\n                    position: 'absolute',\n                    top: 0,\n                    left: 0,\n                    opacity: node.opacity,\n                    width: animatedProps.width,\n                    height: animatedProps.height,\n                    background: animatedProps.color,\n                }}\n                onMouseEnter={node.onMouseEnter}\n                onMouseMove={node.onMouseMove}\n                onMouseLeave={node.onMouseLeave}\n                onClick={node.onClick}\n            />\n            {showLabel && (\n                <animated.span\n                    data-testid={`label.${node.id}`}\n                    style={{\n                        ...theme.labels.text,\n                        position: 'absolute',\n                        display: 'flex',\n                        top: -5,\n                        left: -5,\n                        width: 10,\n                        height: 10,\n                        justifyContent: 'center',\n                        alignItems: 'center',\n                        whiteSpace: 'nowrap',\n                        color: node.labelTextColor,\n                        transformOrigin: 'center center',\n                        transform: htmlLabelTransform(\n                            animatedProps.labelX,\n                            animatedProps.labelY,\n                            animatedProps.labelRotation\n                        ),\n                        opacity: animatedProps.labelOpacity,\n                        pointerEvents: 'none',\n                    }}\n                >\n                    {node.label}\n                </animated.span>\n            )}\n            {showParentLabel && (\n                <animated.span\n                    data-testid={`parentLabel.${node.id}`}\n                    style={{\n                        ...theme.labels.text,\n                        position: 'absolute',\n                        display: 'flex',\n                        justifyContent: 'flex-start',\n                        alignItems: 'center',\n                        whiteSpace: 'nowrap',\n                        width: 10,\n                        height: 10,\n                        color: node.parentLabelTextColor,\n                        transformOrigin: 'top left',\n                        transform: htmlParentLabelTransform(\n                            animatedProps.parentLabelX,\n                            animatedProps.parentLabelY,\n                            animatedProps.parentLabelRotation\n                        ),\n                        opacity: animatedProps.parentLabelOpacity,\n                        pointerEvents: 'none',\n                    }}\n                >\n                    {node.parentLabel}\n                </animated.span>\n            )}\n        </animated.div>\n    )\n}\n\nexport const TreeMapHtmlNode = memo(NonMemoizedTreeMapHtmlNode) as typeof NonMemoizedTreeMapHtmlNode\n","import { TreeMapCommonProps, DefaultTreeMapDatum, LayerId } from './types'\nimport { TreeMapNode } from './TreeMapNode'\nimport { TreeMapNodeTooltip } from './TreeMapNodeTooltip'\nimport { TreeMapHtmlNode } from './TreeMapHtmlNode'\n\nexport const commonDefaultProps: Omit<\n    TreeMapCommonProps<DefaultTreeMapDatum>,\n    | 'valueFormat'\n    | 'margin'\n    | 'theme'\n    | 'labelFormat'\n    | 'onMouseEnter'\n    | 'onMouseMove'\n    | 'onMouseLeave'\n    | 'onClick'\n    | 'renderWrapper'\n    | 'ariaLabel'\n    | 'ariaLabelledBy'\n    | 'ariaDescribedBy'\n> & {\n    layers: LayerId[]\n} = {\n    layers: ['nodes'],\n\n    identity: 'id',\n    value: 'value',\n\n    tile: 'squarify',\n    leavesOnly: false,\n    innerPadding: 0,\n    outerPadding: 0,\n\n    colors: { scheme: 'nivo' as const },\n    colorBy: 'pathComponents.1',\n    nodeOpacity: 0.33,\n\n    enableLabel: true,\n    label: 'formattedValue',\n    labelSkipSize: 0,\n    labelTextColor: { from: 'color', modifiers: [['darker', 1]] },\n    orientLabel: true,\n\n    enableParentLabel: true,\n    parentLabel: 'id',\n    parentLabelSize: 20,\n    parentLabelPosition: 'top',\n    parentLabelPadding: 6,\n    parentLabelTextColor: { from: 'color', modifiers: [['darker', 1]] },\n\n    borderWidth: 1,\n    borderColor: { from: 'color', modifiers: [['darker', 1]] },\n\n    isInteractive: true,\n    tooltip: TreeMapNodeTooltip,\n\n    role: 'img',\n\n    animate: true,\n    motionConfig: 'gentle',\n}\n\nexport const svgDefaultProps = {\n    ...commonDefaultProps,\n    nodeComponent: TreeMapNode,\n    defs: [],\n    fill: [],\n}\n\nexport const htmlDefaultProps = {\n    ...commonDefaultProps,\n    nodeComponent: TreeMapHtmlNode,\n}\n\nexport const canvasDefaultProps = {\n    ...commonDefaultProps,\n    pixelRatio: typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1,\n}\n","import {\n    treemapBinary,\n    treemapDice,\n    treemapSlice,\n    treemapSliceDice,\n    treemapSquarify,\n} from 'd3-hierarchy'\n\nexport const tileByType = {\n    binary: treemapBinary,\n    dice: treemapDice,\n    slice: treemapSlice,\n    sliceDice: treemapSliceDice,\n    squarify: treemapSquarify,\n} as const\n\nexport type TileType = keyof typeof tileByType\n","import { createElement, useCallback, useMemo, MouseEvent } from 'react'\nimport omit from 'lodash/omit.js'\nimport cloneDeep from 'lodash/cloneDeep.js'\nimport startCase from 'lodash/startCase.js'\nimport {\n    treemap as d3Treemap,\n    hierarchy,\n    HierarchyNode,\n    HierarchyRectangularNode,\n} from 'd3-hierarchy'\nimport { useValueFormatter, PropertyAccessor, usePropertyAccessor } from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { useOrdinalColorScale, useInheritedColor } from '@nivo/colors'\nimport { useTooltip } from '@nivo/tooltip'\nimport { commonDefaultProps } from './defaults'\nimport {\n    DefaultTreeMapDatum,\n    TreeMapCommonProps,\n    TreeMapDataProps,\n    ComputedNode,\n    ComputedNodeWithoutStyles,\n    ComputedNodeWithHandlers,\n    CustomLayerProps,\n} from './types'\nimport { tileByType } from './tiling'\n\nexport const useTreeMapLayout = <Datum extends object>({\n    width,\n    height,\n    tile,\n    innerPadding,\n    outerPadding,\n    enableParentLabel,\n    parentLabelSize,\n    parentLabelPosition,\n    leavesOnly,\n}: {\n    width: number\n    height: number\n    tile: TreeMapCommonProps<Datum>['tile']\n    innerPadding: TreeMapCommonProps<Datum>['innerPadding']\n    outerPadding: TreeMapCommonProps<Datum>['outerPadding']\n    enableParentLabel: TreeMapCommonProps<Datum>['enableParentLabel']\n    parentLabelSize: TreeMapCommonProps<Datum>['parentLabelSize']\n    parentLabelPosition: TreeMapCommonProps<Datum>['parentLabelPosition']\n    leavesOnly: TreeMapCommonProps<Datum>['leavesOnly']\n}) =>\n    useMemo(() => {\n        const treemap = d3Treemap<Datum>()\n            .size([width, height])\n            .tile(tileByType[tile])\n            .round(true)\n            .paddingInner(innerPadding)\n            .paddingOuter(outerPadding)\n\n        if (enableParentLabel && !leavesOnly) {\n            const parentLabelPadding = parentLabelSize + outerPadding * 2\n            // @ts-expect-error dynamic function call\n            treemap[`padding${startCase(parentLabelPosition)}`](parentLabelPadding)\n        }\n\n        return treemap\n    }, [\n        width,\n        height,\n        tile,\n        innerPadding,\n        outerPadding,\n        enableParentLabel,\n        parentLabelSize,\n        parentLabelPosition,\n        leavesOnly,\n    ])\n\nexport const useHierarchy = <Datum extends object>({\n    root,\n    getValue,\n}: {\n    root: Datum\n    getValue: (datum: Datum) => number\n}) => useMemo(() => hierarchy<Datum>(root).sum(getValue), [root, getValue])\n\nconst computeNodeIdAndPath = <Datum extends object>(\n    node: HierarchyNode<Datum>,\n    getIdentity: (node: Datum) => string\n) => {\n    const path = node\n        .ancestors()\n        .map(ancestor => getIdentity(ancestor.data))\n        .reverse()\n\n    return { path: path.join('.'), pathComponents: path }\n}\n\nexport const useTreeMap = <Datum extends object = DefaultTreeMapDatum>({\n    data,\n    width,\n    height,\n    identity = commonDefaultProps.identity as PropertyAccessor<Datum, string>,\n    value = commonDefaultProps.value as PropertyAccessor<Datum, number>,\n    valueFormat,\n    leavesOnly = commonDefaultProps.leavesOnly,\n    tile = commonDefaultProps.tile,\n    innerPadding = commonDefaultProps.innerPadding,\n    outerPadding = commonDefaultProps.outerPadding,\n    label = commonDefaultProps.label as TreeMapCommonProps<Datum>['label'],\n    orientLabel = commonDefaultProps.orientLabel,\n    enableParentLabel = commonDefaultProps.enableParentLabel,\n    parentLabel = commonDefaultProps.parentLabel as TreeMapCommonProps<Datum>['parentLabel'],\n    parentLabelSize = commonDefaultProps.parentLabelSize,\n    parentLabelPosition = commonDefaultProps.parentLabelPosition,\n    parentLabelPadding = commonDefaultProps.parentLabelPadding,\n    colors = commonDefaultProps.colors as TreeMapCommonProps<Datum>['colors'],\n    colorBy = commonDefaultProps.colorBy as TreeMapCommonProps<Datum>['colorBy'],\n    nodeOpacity = commonDefaultProps.nodeOpacity,\n    borderColor = commonDefaultProps.borderColor as TreeMapCommonProps<Datum>['borderColor'],\n    labelTextColor = commonDefaultProps.labelTextColor as TreeMapCommonProps<Datum>['labelTextColor'],\n    parentLabelTextColor = commonDefaultProps.parentLabelTextColor as TreeMapCommonProps<Datum>['parentLabelTextColor'],\n}: {\n    data: TreeMapDataProps<Datum>['data']\n    width: number\n    height: number\n    identity?: TreeMapCommonProps<Datum>['identity']\n    value?: TreeMapCommonProps<Datum>['value']\n    valueFormat?: TreeMapCommonProps<Datum>['valueFormat']\n    tile?: TreeMapCommonProps<Datum>['tile']\n    leavesOnly?: TreeMapCommonProps<Datum>['leavesOnly']\n    innerPadding?: TreeMapCommonProps<Datum>['innerPadding']\n    outerPadding?: TreeMapCommonProps<Datum>['outerPadding']\n    label?: TreeMapCommonProps<Datum>['label']\n    orientLabel?: TreeMapCommonProps<Datum>['orientLabel']\n    enableParentLabel?: TreeMapCommonProps<Datum>['enableParentLabel']\n    parentLabel?: TreeMapCommonProps<Datum>['parentLabel']\n    parentLabelSize?: TreeMapCommonProps<Datum>['parentLabelSize']\n    parentLabelPosition?: TreeMapCommonProps<Datum>['parentLabelPosition']\n    parentLabelPadding?: TreeMapCommonProps<Datum>['parentLabelPadding']\n    colors?: TreeMapCommonProps<Datum>['colors']\n    colorBy?: TreeMapCommonProps<Datum>['colorBy']\n    nodeOpacity?: TreeMapCommonProps<Datum>['nodeOpacity']\n    borderColor?: TreeMapCommonProps<Datum>['borderColor']\n    labelTextColor?: TreeMapCommonProps<Datum>['labelTextColor']\n    parentLabelTextColor?: TreeMapCommonProps<Datum>['parentLabelTextColor']\n}) => {\n    const getIdentity = usePropertyAccessor(identity)\n    const getValue = usePropertyAccessor(value)\n    const formatValue = useValueFormatter(valueFormat)\n    const getLabel = usePropertyAccessor(label)\n    const getParentLabel = usePropertyAccessor(parentLabel)\n\n    const layout = useTreeMapLayout<Datum>({\n        width,\n        height,\n        tile,\n        innerPadding,\n        outerPadding,\n        enableParentLabel,\n        parentLabelSize,\n        parentLabelPosition,\n        leavesOnly,\n    })\n\n    const hierarchy = useHierarchy<Datum>({ root: data, getValue })\n\n    const rawNodes = useMemo(() => {\n        // d3 treemap mutates the data, so we need to copy it\n        // to have proper behavior for subsequents useMemo()\n        const root = cloneDeep(hierarchy)\n        layout(root)\n\n        return (\n            leavesOnly ? root.leaves() : root.descendants()\n        ) as HierarchyRectangularNode<Datum>[]\n    }, [hierarchy, layout, leavesOnly])\n\n    const nodes = useMemo(\n        () =>\n            rawNodes.map(rawNode => {\n                const { path, pathComponents } = computeNodeIdAndPath(rawNode, getIdentity)\n\n                const node = {\n                    id: getIdentity(rawNode.data),\n                    path,\n                    pathComponents,\n                    data: omit(rawNode.data, 'children'),\n                    x: rawNode.x0,\n                    y: rawNode.y0,\n                    width: rawNode.x1 - rawNode.x0,\n                    height: rawNode.y1 - rawNode.y0,\n                    value: rawNode.value!,\n                    formattedValue: formatValue(rawNode.value!),\n                    treeDepth: rawNode.depth,\n                    treeHeight: rawNode.height,\n                    isParent: rawNode.height > 0,\n                    isLeaf: rawNode.height === 0,\n                    parentLabelX: 0,\n                    parentLabelY: 0,\n                    parentLabelRotation: 0,\n                } as ComputedNodeWithoutStyles<Datum>\n\n                node.labelRotation = orientLabel && node.height > node.width ? -90 : 0\n\n                if (parentLabelPosition === 'top') {\n                    node.parentLabelX = outerPadding + parentLabelPadding\n                    node.parentLabelY = outerPadding + parentLabelSize / 2\n                }\n                if (parentLabelPosition === 'right') {\n                    node.parentLabelX = node.width - outerPadding - parentLabelSize / 2\n                    node.parentLabelY = node.height - outerPadding - parentLabelPadding\n                    node.parentLabelRotation = -90\n                }\n                if (parentLabelPosition === 'bottom') {\n                    node.parentLabelX = outerPadding + parentLabelPadding\n                    node.parentLabelY = node.height - outerPadding - parentLabelSize / 2\n                }\n                if (parentLabelPosition === 'left') {\n                    node.parentLabelX = outerPadding + parentLabelSize / 2\n                    node.parentLabelY = node.height - outerPadding - parentLabelPadding\n                    node.parentLabelRotation = -90\n                }\n\n                node.label = getLabel(node)\n                node.parentLabel = getParentLabel(node)\n\n                return node\n            }),\n        [\n            rawNodes,\n            getIdentity,\n            formatValue,\n            getLabel,\n            orientLabel,\n            getParentLabel,\n            parentLabelSize,\n            parentLabelPosition,\n            parentLabelPadding,\n            outerPadding,\n        ]\n    )\n\n    const theme = useTheme()\n    const getColor = useOrdinalColorScale(colors, colorBy)\n    const getBorderColor = useInheritedColor(borderColor, theme)\n    const getLabelTextColor = useInheritedColor(labelTextColor, theme)\n    const getParentLabelTextColor = useInheritedColor(parentLabelTextColor, theme)\n\n    const nodesWithStyles = useMemo(\n        () =>\n            nodes.map(node => {\n                const nodeWithStyles = {\n                    ...node,\n                    color: getColor(node),\n                    opacity: nodeOpacity,\n                } as ComputedNode<Datum>\n\n                nodeWithStyles.borderColor = getBorderColor(nodeWithStyles)\n                nodeWithStyles.labelTextColor = getLabelTextColor(nodeWithStyles)\n                nodeWithStyles.parentLabelTextColor = getParentLabelTextColor(nodeWithStyles)\n\n                return nodeWithStyles\n            }),\n        [nodes, getColor, nodeOpacity, getBorderColor, getLabelTextColor, getParentLabelTextColor]\n    )\n\n    return {\n        hierarchy,\n        nodes: nodesWithStyles,\n        layout,\n    }\n}\n\nexport const useInteractiveTreeMapNodes = <Datum extends object>(\n    nodes: ComputedNode<Datum>[],\n    {\n        isInteractive,\n        onMouseEnter,\n        onMouseMove,\n        onMouseLeave,\n        onClick,\n        tooltip,\n    }: {\n        isInteractive: TreeMapCommonProps<Datum>['isInteractive']\n        onMouseEnter?: TreeMapCommonProps<Datum>['onMouseEnter']\n        onMouseMove?: TreeMapCommonProps<Datum>['onMouseMove']\n        onMouseLeave?: TreeMapCommonProps<Datum>['onMouseLeave']\n        onClick?: TreeMapCommonProps<Datum>['onClick']\n        tooltip: TreeMapCommonProps<Datum>['tooltip']\n    }\n): ComputedNodeWithHandlers<Datum>[] => {\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const showTooltip = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            showTooltipFromEvent(createElement(tooltip, { node }), event, 'left')\n        },\n        [showTooltipFromEvent, tooltip]\n    )\n\n    const handleMouseEnter = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            showTooltip(node, event)\n            onMouseEnter?.(node, event)\n        },\n        [onMouseEnter, showTooltip]\n    )\n\n    const handleMouseMove = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            showTooltip(node, event)\n            onMouseMove?.(node, event)\n        },\n        [onMouseMove, showTooltip]\n    )\n\n    const handleMouseLeave = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            hideTooltip()\n            onMouseLeave?.(node, event)\n        },\n        [onMouseLeave, hideTooltip]\n    )\n\n    const handleClick = useCallback(\n        (node: ComputedNode<Datum>, event: MouseEvent) => {\n            onClick?.(node, event)\n        },\n        [onClick]\n    )\n\n    return useMemo(\n        () =>\n            nodes.map(node => {\n                if (!isInteractive) return node\n\n                return {\n                    ...node,\n                    onMouseEnter: (event: MouseEvent) => handleMouseEnter(node, event),\n                    onMouseMove: (event: MouseEvent) => handleMouseMove(node, event),\n                    onMouseLeave: (event: MouseEvent) => handleMouseLeave(node, event),\n                    onClick: (event: MouseEvent) => handleClick(node, event),\n                }\n            }),\n        [isInteractive, nodes, handleMouseEnter, handleMouseMove, handleMouseLeave, handleClick]\n    )\n}\n\nexport const useCustomLayerProps = <Datum extends object>({\n    nodes,\n}: CustomLayerProps<Datum>): CustomLayerProps<Datum> =>\n    useMemo(\n        () => ({\n            nodes,\n        }),\n        [nodes]\n    )\n","import { createElement, memo } from 'react'\nimport { useTransition } from '@react-spring/web'\nimport { useMotionConfig } from '@nivo/core'\nimport { useInteractiveTreeMapNodes } from './hooks'\nimport {\n    ComputedNode,\n    TreeMapCommonProps,\n    NodeAnimatedProps,\n    NodeComponent,\n    ComputedNodeWithHandlers,\n} from './types'\n\nconst getAnimatedNodeProps = <Datum extends object>(\n    node: ComputedNodeWithHandlers<Datum>\n): NodeAnimatedProps => ({\n    x: node.x,\n    y: node.y,\n    width: node.width,\n    height: node.height,\n    color: node.color,\n    labelX: node.width / 2,\n    labelY: node.height / 2,\n    labelRotation: node.labelRotation,\n    labelOpacity: 1,\n    parentLabelX: node.parentLabelX,\n    parentLabelY: node.parentLabelY,\n    parentLabelRotation: node.parentLabelRotation,\n    parentLabelOpacity: 1,\n})\n\nconst getEndingAnimatedNodeProps = <Datum extends object>(\n    node: ComputedNodeWithHandlers<Datum>\n): NodeAnimatedProps => {\n    const x = node.x + node.width / 2\n    const y = node.y + node.height / 2\n\n    return {\n        x,\n        y,\n        width: 0,\n        height: 0,\n        color: node.color,\n        labelX: 0,\n        labelY: 0,\n        labelRotation: node.labelRotation,\n        labelOpacity: 0,\n        parentLabelX: 0,\n        parentLabelY: 0,\n        parentLabelRotation: node.parentLabelRotation,\n        parentLabelOpacity: 0,\n    }\n}\n\ninterface TreeMapNodesProps<Datum extends object> {\n    nodes: ComputedNode<Datum>[]\n    nodeComponent: NodeComponent<Datum>\n    borderWidth: TreeMapCommonProps<Datum>['borderWidth']\n    enableLabel: TreeMapCommonProps<Datum>['enableLabel']\n    labelSkipSize: TreeMapCommonProps<Datum>['labelSkipSize']\n    enableParentLabel: TreeMapCommonProps<Datum>['enableParentLabel']\n    isInteractive: TreeMapCommonProps<Datum>['isInteractive']\n    onMouseEnter?: TreeMapCommonProps<Datum>['onMouseEnter']\n    onMouseMove?: TreeMapCommonProps<Datum>['onMouseMove']\n    onMouseLeave?: TreeMapCommonProps<Datum>['onMouseLeave']\n    onClick?: TreeMapCommonProps<Datum>['onClick']\n    tooltip: TreeMapCommonProps<Datum>['tooltip']\n}\n\nconst NonMemoizedTreeMapNodes = <Datum extends object>({\n    nodes,\n    nodeComponent,\n    borderWidth,\n    enableLabel,\n    labelSkipSize,\n    enableParentLabel,\n    isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onClick,\n    tooltip,\n}: TreeMapNodesProps<Datum>) => {\n    const nodesWithHandlers = useInteractiveTreeMapNodes<Datum>(nodes, {\n        isInteractive,\n        onMouseEnter,\n        onMouseMove,\n        onMouseLeave,\n        onClick,\n        tooltip,\n    })\n\n    const { animate, config: springConfig } = useMotionConfig()\n    const transition = useTransition<ComputedNodeWithHandlers<Datum>, NodeAnimatedProps>(\n        nodesWithHandlers,\n        {\n            keys: node => node.path,\n            initial: getAnimatedNodeProps,\n            from: getEndingAnimatedNodeProps,\n            enter: getAnimatedNodeProps,\n            update: getAnimatedNodeProps,\n            leave: getEndingAnimatedNodeProps,\n            config: springConfig,\n            immediate: !animate,\n        }\n    )\n\n    return (\n        <>\n            {transition((animatedProps, node) =>\n                createElement(nodeComponent, {\n                    key: node.path,\n                    node,\n                    animatedProps,\n                    borderWidth,\n                    enableLabel,\n                    labelSkipSize,\n                    enableParentLabel,\n                })\n            )}\n        </>\n    )\n}\n\nexport const TreeMapNodes = memo(NonMemoizedTreeMapNodes) as typeof NonMemoizedTreeMapNodes\n","import { createElement, Fragment, ReactNode, forwardRef, Ref, ReactElement } from 'react'\nimport {\n    SvgWrapper,\n    Container,\n    useDimensions,\n    // @ts-expect-error no types\n    bindDefs,\n    WithChartRef,\n} from '@nivo/core'\nimport { useTreeMap, useCustomLayerProps } from './hooks'\nimport { TreeMapNodes } from './TreeMapNodes'\nimport {\n    DefaultTreeMapDatum,\n    NodeComponent,\n    TreeMapCommonProps,\n    TreeMapSvgProps,\n    LayerId,\n} from './types'\nimport { svgDefaultProps } from './defaults'\n\ntype InnerTreeMapProps<Datum extends object> = Omit<\n    TreeMapSvgProps<Datum>,\n    'animate' | 'motionConfig' | 'renderWrapper' | 'theme'\n> & {\n    forwardedRef: Ref<SVGSVGElement>\n}\n\nconst InnerTreeMap = <Datum extends object>({\n    data,\n    identity = svgDefaultProps.identity as TreeMapCommonProps<Datum>['identity'],\n    value = svgDefaultProps.value as TreeMapCommonProps<Datum>['value'],\n    valueFormat,\n    tile = svgDefaultProps.tile,\n    nodeComponent = svgDefaultProps.nodeComponent as NodeComponent<Datum>,\n    innerPadding = svgDefaultProps.innerPadding,\n    outerPadding = svgDefaultProps.outerPadding,\n    leavesOnly = svgDefaultProps.leavesOnly,\n    width,\n    height,\n    margin: partialMargin,\n    layers = svgDefaultProps.layers as NonNullable<TreeMapSvgProps<Datum>['layers']>,\n    colors = svgDefaultProps.colors as TreeMapCommonProps<Datum>['colors'],\n    colorBy = svgDefaultProps.colorBy as TreeMapCommonProps<Datum>['colorBy'],\n    nodeOpacity = svgDefaultProps.nodeOpacity,\n    borderWidth = svgDefaultProps.borderWidth,\n    borderColor = svgDefaultProps.borderColor as TreeMapCommonProps<Datum>['borderColor'],\n    defs = svgDefaultProps.defs,\n    fill = svgDefaultProps.fill,\n    enableLabel = svgDefaultProps.enableLabel,\n    label = svgDefaultProps.label as TreeMapCommonProps<Datum>['label'],\n    labelTextColor = svgDefaultProps.labelTextColor as TreeMapCommonProps<Datum>['labelTextColor'],\n    orientLabel = svgDefaultProps.orientLabel,\n    labelSkipSize = svgDefaultProps.labelSkipSize,\n    enableParentLabel = svgDefaultProps.enableParentLabel,\n    parentLabel = svgDefaultProps.parentLabel as TreeMapCommonProps<Datum>['parentLabel'],\n    parentLabelSize = svgDefaultProps.parentLabelSize,\n    parentLabelPosition = svgDefaultProps.parentLabelPosition,\n    parentLabelPadding = svgDefaultProps.parentLabelPadding,\n    parentLabelTextColor = svgDefaultProps.parentLabelTextColor as TreeMapCommonProps<Datum>['parentLabelTextColor'],\n    isInteractive = svgDefaultProps.isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onClick,\n    tooltip = svgDefaultProps.tooltip as TreeMapCommonProps<Datum>['tooltip'],\n    role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n    forwardedRef,\n}: InnerTreeMapProps<Datum>) => {\n    const { margin, innerWidth, innerHeight, outerWidth, outerHeight } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const { nodes } = useTreeMap<Datum>({\n        data,\n        identity,\n        value,\n        valueFormat,\n        leavesOnly,\n        width: innerWidth,\n        height: innerHeight,\n        tile,\n        innerPadding,\n        outerPadding,\n        colors,\n        colorBy,\n        nodeOpacity,\n        borderColor,\n        label,\n        labelTextColor,\n        orientLabel,\n        enableParentLabel,\n        parentLabel,\n        parentLabelSize,\n        parentLabelPosition,\n        parentLabelPadding,\n        parentLabelTextColor,\n    })\n\n    const layerById: Record<LayerId, ReactNode> = {\n        nodes: null,\n    }\n\n    if (layers.includes('nodes')) {\n        layerById.nodes = (\n            <TreeMapNodes<Datum>\n                key=\"nodes\"\n                nodes={nodes}\n                nodeComponent={nodeComponent}\n                borderWidth={borderWidth}\n                enableLabel={enableLabel}\n                labelSkipSize={labelSkipSize}\n                enableParentLabel={enableParentLabel}\n                isInteractive={isInteractive}\n                onMouseEnter={onMouseEnter}\n                onMouseMove={onMouseMove}\n                onMouseLeave={onMouseLeave}\n                onClick={onClick}\n                tooltip={tooltip}\n            />\n        )\n    }\n\n    const customLayerProps = useCustomLayerProps<Datum>({ nodes })\n\n    const boundDefs = bindDefs(defs, nodes, fill)\n\n    return (\n        <SvgWrapper\n            width={outerWidth}\n            height={outerHeight}\n            margin={margin}\n            defs={boundDefs}\n            role={role}\n            ariaLabel={ariaLabel}\n            ariaLabelledBy={ariaLabelledBy}\n            ariaDescribedBy={ariaDescribedBy}\n            ref={forwardedRef}\n        >\n            {layers.map((layer, i) => {\n                if (typeof layer === 'function') {\n                    return <Fragment key={i}>{createElement(layer, customLayerProps)}</Fragment>\n                }\n\n                return layerById?.[layer] ?? null\n            })}\n        </SvgWrapper>\n    )\n}\n\nexport const TreeMap = forwardRef(\n    <Datum extends object = DefaultTreeMapDatum>(\n        {\n            isInteractive = svgDefaultProps.isInteractive,\n            animate = svgDefaultProps.animate,\n            motionConfig = svgDefaultProps.motionConfig,\n            theme,\n            renderWrapper,\n            ...props\n        }: TreeMapSvgProps<Datum>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <Container\n            animate={animate}\n            isInteractive={isInteractive}\n            motionConfig={motionConfig}\n            renderWrapper={renderWrapper}\n            theme={theme}\n        >\n            <InnerTreeMap<Datum> {...props} isInteractive={isInteractive} forwardedRef={ref} />\n        </Container>\n    )\n) as <Datum extends object = DefaultTreeMapDatum>(\n    props: WithChartRef<TreeMapSvgProps<Datum>, SVGSVGElement>\n) => ReactElement\n","import { forwardRef, Ref, ReactElement } from 'react'\nimport { ResponsiveWrapper, ResponsiveProps, WithChartRef } from '@nivo/core'\nimport { DefaultTreeMapDatum, TreeMapSvgProps } from './types'\nimport { TreeMap } from './TreeMap'\n\nexport const ResponsiveTreeMap = forwardRef(\n    <Datum extends object = DefaultTreeMapDatum>(\n        {\n            defaultWidth,\n            defaultHeight,\n            onResize,\n            debounceResize,\n            ...props\n        }: ResponsiveProps<TreeMapSvgProps<Datum>>,\n        ref: Ref<SVGSVGElement>\n    ) => (\n        <ResponsiveWrapper\n            defaultWidth={defaultWidth}\n            defaultHeight={defaultHeight}\n            onResize={onResize}\n            debounceResize={debounceResize}\n        >\n            {({ width, height }) => (\n                <TreeMap<Datum> {...props} width={width} height={height} ref={ref} />\n            )}\n        </ResponsiveWrapper>\n    )\n) as <Datum extends object = DefaultTreeMapDatum>(\n    props: WithChartRef<ResponsiveProps<TreeMapSvgProps<Datum>>, SVGSVGElement>\n) => ReactElement\n","import { createElement, Fragment, ReactNode, forwardRef, Ref, ReactElement } from 'react'\nimport { Container, useDimensions, WithChartRef } from '@nivo/core'\nimport { useCustomLayerProps, useTreeMap } from './hooks'\nimport { TreeMapNodes } from './TreeMapNodes'\nimport { DefaultTreeMapDatum, TreeMapCommonProps, TreeMapHtmlProps, LayerId } from './types'\nimport { htmlDefaultProps, svgDefaultProps } from './defaults'\n\ntype InnerTreeMapHtmlProps<Datum extends object> = Omit<\n    TreeMapHtmlProps<Datum>,\n    'animate' | 'motionConfig' | 'renderWrapper' | 'theme'\n> & {\n    forwardedRef: Ref<HTMLDivElement>\n}\n\nconst InnerTreeMapHtml = <Datum extends object>({\n    data,\n    identity = htmlDefaultProps.identity as TreeMapCommonProps<Datum>['identity'],\n    value = htmlDefaultProps.value as TreeMapCommonProps<Datum>['value'],\n    tile = htmlDefaultProps.tile,\n    nodeComponent = htmlDefaultProps.nodeComponent,\n    valueFormat,\n    innerPadding = htmlDefaultProps.innerPadding,\n    outerPadding = htmlDefaultProps.outerPadding,\n    leavesOnly = htmlDefaultProps.leavesOnly,\n    width,\n    height,\n    margin: partialMargin,\n    layers = svgDefaultProps.layers as NonNullable<TreeMapHtmlProps<Datum>['layers']>,\n    colors = htmlDefaultProps.colors as TreeMapCommonProps<Datum>['colors'],\n    colorBy = htmlDefaultProps.colorBy as TreeMapCommonProps<Datum>['colorBy'],\n    nodeOpacity = htmlDefaultProps.nodeOpacity,\n    borderWidth = htmlDefaultProps.borderWidth,\n    borderColor = htmlDefaultProps.borderColor as TreeMapCommonProps<Datum>['borderColor'],\n    enableLabel = htmlDefaultProps.enableLabel,\n    label = htmlDefaultProps.label as TreeMapCommonProps<Datum>['label'],\n    labelTextColor = htmlDefaultProps.labelTextColor as TreeMapCommonProps<Datum>['labelTextColor'],\n    orientLabel = htmlDefaultProps.orientLabel,\n    labelSkipSize = htmlDefaultProps.labelSkipSize,\n    enableParentLabel = htmlDefaultProps.enableParentLabel,\n    parentLabel = htmlDefaultProps.parentLabel as TreeMapCommonProps<Datum>['parentLabel'],\n    parentLabelSize = htmlDefaultProps.parentLabelSize,\n    parentLabelPosition = htmlDefaultProps.parentLabelPosition,\n    parentLabelPadding = htmlDefaultProps.parentLabelPadding,\n    parentLabelTextColor = htmlDefaultProps.parentLabelTextColor as TreeMapCommonProps<Datum>['parentLabelTextColor'],\n    isInteractive = htmlDefaultProps.isInteractive,\n    onMouseEnter,\n    onMouseMove,\n    onMouseLeave,\n    onClick,\n    tooltip = htmlDefaultProps.tooltip as TreeMapCommonProps<Datum>['tooltip'],\n    role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n    forwardedRef,\n}: InnerTreeMapHtmlProps<Datum>) => {\n    const { margin, innerWidth, innerHeight, outerWidth, outerHeight } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const { nodes } = useTreeMap<Datum>({\n        data,\n        identity,\n        value,\n        valueFormat,\n        leavesOnly,\n        width: innerWidth,\n        height: innerHeight,\n        tile,\n        innerPadding,\n        outerPadding,\n        colors,\n        colorBy,\n        nodeOpacity,\n        borderColor,\n        label,\n        labelTextColor,\n        orientLabel,\n        enableParentLabel,\n        parentLabel,\n        parentLabelSize,\n        parentLabelPosition,\n        parentLabelPadding,\n        parentLabelTextColor,\n    })\n\n    const layerById: Record<LayerId, ReactNode> = {\n        nodes: null,\n    }\n\n    if (layers.includes('nodes')) {\n        layerById.nodes = (\n            <TreeMapNodes<Datum>\n                key=\"nodes\"\n                nodes={nodes}\n                nodeComponent={nodeComponent}\n                borderWidth={borderWidth}\n                enableLabel={enableLabel}\n                labelSkipSize={labelSkipSize}\n                enableParentLabel={enableParentLabel}\n                isInteractive={isInteractive}\n                onMouseEnter={onMouseEnter}\n                onMouseMove={onMouseMove}\n                onMouseLeave={onMouseLeave}\n                onClick={onClick}\n                tooltip={tooltip}\n            />\n        )\n    }\n\n    const customLayerProps = useCustomLayerProps<Datum>({ nodes })\n\n    return (\n        <div\n            role={role}\n            aria-label={ariaLabel}\n            aria-labelledby={ariaLabelledBy}\n            aria-describedby={ariaDescribedBy}\n            style={{\n                position: 'relative',\n                width: outerWidth,\n                height: outerHeight,\n            }}\n            ref={forwardedRef}\n        >\n            <div style={{ position: 'absolute', top: margin.top, left: margin.left }}>\n                {layers.map((layer, i) => {\n                    if (typeof layer === 'function') {\n                        return <Fragment key={i}>{createElement(layer, customLayerProps)}</Fragment>\n                    }\n\n                    return layerById?.[layer] ?? null\n                })}\n            </div>\n        </div>\n    )\n}\n\nexport const TreeMapHtml = forwardRef(\n    <Datum extends object = DefaultTreeMapDatum>(\n        {\n            isInteractive = htmlDefaultProps.isInteractive,\n            animate = htmlDefaultProps.animate,\n            motionConfig = htmlDefaultProps.motionConfig,\n            theme,\n            renderWrapper,\n            ...props\n        }: TreeMapHtmlProps<Datum>,\n        ref: Ref<HTMLDivElement>\n    ) => (\n        <Container\n            animate={animate}\n            isInteractive={isInteractive}\n            motionConfig={motionConfig}\n            renderWrapper={renderWrapper}\n            theme={theme}\n        >\n            <InnerTreeMapHtml<Datum> {...props} isInteractive={isInteractive} forwardedRef={ref} />\n        </Container>\n    )\n) as <Datum extends object = DefaultTreeMapDatum>(\n    props: WithChartRef<TreeMapHtmlProps<Datum>, HTMLDivElement>\n) => ReactElement\n","import { forwardRef, Ref, ReactElement } from 'react'\nimport { ResponsiveWrapper, ResponsiveProps, WithChartRef } from '@nivo/core'\nimport { DefaultTreeMapDatum, TreeMapHtmlProps } from './types'\nimport { TreeMapHtml } from './TreeMapHtml'\n\nexport const ResponsiveTreeMapHtml = forwardRef(\n    <Datum extends object = DefaultTreeMapDatum>(\n        {\n            defaultWidth,\n            defaultHeight,\n            onResize,\n            debounceResize,\n            ...props\n        }: ResponsiveProps<TreeMapHtmlProps<Datum>>,\n        ref: Ref<HTMLDivElement>\n    ) => (\n        <ResponsiveWrapper\n            defaultWidth={defaultWidth}\n            defaultHeight={defaultHeight}\n            onResize={onResize}\n            debounceResize={debounceResize}\n        >\n            {({ width, height }) => (\n                <TreeMapHtml<Datum> {...props} width={width} height={height} ref={ref} />\n            )}\n        </ResponsiveWrapper>\n    )\n) as <Datum extends object = DefaultTreeMapDatum>(\n    props: WithChartRef<ResponsiveProps<TreeMapHtmlProps<Datum>>, HTMLDivElement>\n) => ReactElement\n","import {\n    createElement,\n    useCallback,\n    useEffect,\n    useRef,\n    MouseEvent,\n    forwardRef,\n    Ref,\n    ReactElement,\n} from 'react'\nimport {\n    degreesToRadians,\n    getRelativeCursor,\n    isCursorInRect,\n    Container,\n    useDimensions,\n    Margin,\n    WithChartRef,\n    mergeRefs,\n} from '@nivo/core'\nimport { useTheme } from '@nivo/theming'\nimport { useTooltip } from '@nivo/tooltip'\nimport { setCanvasFont, drawCanvasText } from '@nivo/text'\nimport { useTreeMap } from './hooks'\nimport { ComputedNode, DefaultTreeMapDatum, TreeMapCanvasProps, TreeMapCommonProps } from './types'\nimport { canvasDefaultProps } from './defaults'\n\nconst findNodeUnderCursor = <Datum extends object>(\n    nodes: ComputedNode<Datum>[],\n    margin: Margin,\n    x: number,\n    y: number\n) =>\n    nodes.find(node =>\n        isCursorInRect(node.x + margin.left, node.y + margin.top, node.width, node.height, x, y)\n    )\n\ntype InnerTreeMapCanvasProps<Datum extends object> = Omit<\n    TreeMapCanvasProps<Datum>,\n    'renderWrapper' | 'theme'\n> & {\n    forwardedRef: Ref<HTMLCanvasElement>\n}\n\nconst InnerTreeMapCanvas = <Datum extends object>({\n    data,\n    identity = canvasDefaultProps.identity as TreeMapCommonProps<Datum>['identity'],\n    value = canvasDefaultProps.identity as TreeMapCommonProps<Datum>['value'],\n    tile = canvasDefaultProps.tile,\n    valueFormat,\n    innerPadding = canvasDefaultProps.innerPadding,\n    outerPadding = canvasDefaultProps.outerPadding,\n    leavesOnly = canvasDefaultProps.leavesOnly,\n    width,\n    height,\n    margin: partialMargin,\n    colors = canvasDefaultProps.colors as TreeMapCommonProps<Datum>['colors'],\n    colorBy = canvasDefaultProps.colorBy as TreeMapCommonProps<Datum>['colorBy'],\n    nodeOpacity = canvasDefaultProps.nodeOpacity,\n    borderWidth = canvasDefaultProps.borderWidth,\n    borderColor = canvasDefaultProps.borderColor as TreeMapCommonProps<Datum>['borderColor'],\n    enableLabel = canvasDefaultProps.enableLabel,\n    label = canvasDefaultProps.label as TreeMapCommonProps<Datum>['label'],\n    labelTextColor = canvasDefaultProps.labelTextColor as TreeMapCommonProps<Datum>['labelTextColor'],\n    orientLabel = canvasDefaultProps.orientLabel,\n    labelSkipSize = canvasDefaultProps.labelSkipSize,\n    isInteractive = canvasDefaultProps.isInteractive,\n    onMouseMove,\n    onClick,\n    tooltip = canvasDefaultProps.tooltip as TreeMapCommonProps<Datum>['tooltip'],\n    pixelRatio = canvasDefaultProps.pixelRatio,\n    role,\n    ariaLabel,\n    ariaLabelledBy,\n    ariaDescribedBy,\n    forwardedRef,\n}: InnerTreeMapCanvasProps<Datum>) => {\n    const canvasEl = useRef<HTMLCanvasElement | null>(null)\n\n    const { margin, innerWidth, innerHeight, outerWidth, outerHeight } = useDimensions(\n        width,\n        height,\n        partialMargin\n    )\n\n    const { nodes } = useTreeMap<Datum>({\n        data,\n        identity,\n        value,\n        valueFormat,\n        leavesOnly,\n        width: innerWidth,\n        height: innerHeight,\n        tile,\n        innerPadding,\n        outerPadding,\n        colors,\n        colorBy,\n        nodeOpacity,\n        borderColor,\n        label,\n        labelTextColor,\n        orientLabel,\n        enableParentLabel: false,\n    })\n\n    const theme = useTheme()\n\n    useEffect(() => {\n        if (canvasEl.current === null) return\n\n        const ctx = canvasEl.current.getContext('2d')\n        if (ctx === null) return\n\n        canvasEl.current.width = outerWidth * pixelRatio\n        canvasEl.current.height = outerHeight * pixelRatio\n\n        ctx.scale(pixelRatio, pixelRatio)\n\n        ctx.fillStyle = theme.background\n        ctx.fillRect(0, 0, outerWidth, outerHeight)\n        ctx.translate(margin.left, margin.top)\n\n        nodes.forEach(node => {\n            ctx.fillStyle = node.color\n            ctx.fillRect(node.x, node.y, node.width, node.height)\n\n            if (borderWidth > 0) {\n                ctx.strokeStyle = node.borderColor\n                ctx.lineWidth = borderWidth\n                ctx.strokeRect(node.x, node.y, node.width, node.height)\n            }\n        })\n\n        if (enableLabel) {\n            ctx.textAlign = 'center'\n            ctx.textBaseline = 'middle'\n            setCanvasFont(ctx, theme.labels.text)\n\n            nodes.forEach(node => {\n                const showLabel =\n                    node.isLeaf &&\n                    (labelSkipSize === 0 || Math.min(node.width, node.height) > labelSkipSize)\n\n                if (!showLabel) return\n\n                const rotate = orientLabel && node.height > node.width\n\n                ctx.save()\n                ctx.translate(node.x + node.width / 2, node.y + node.height / 2)\n                ctx.rotate(degreesToRadians(rotate ? -90 : 0))\n\n                drawCanvasText(\n                    ctx,\n                    {\n                        ...theme.labels.text,\n                        fill: node.labelTextColor,\n                    },\n                    String(node.label)\n                )\n\n                ctx.restore()\n            })\n        }\n    }, [\n        canvasEl,\n        nodes,\n        outerWidth,\n        outerHeight,\n        innerWidth,\n        innerHeight,\n        margin,\n        borderWidth,\n        enableLabel,\n        orientLabel,\n        labelSkipSize,\n        theme,\n        pixelRatio,\n    ])\n\n    const { showTooltipFromEvent, hideTooltip } = useTooltip()\n\n    const handleMouseHover = useCallback(\n        (event: MouseEvent<HTMLCanvasElement>) => {\n            if (canvasEl.current === null) return\n\n            const [x, y] = getRelativeCursor(canvasEl.current, event)\n            const node = findNodeUnderCursor(nodes, margin, x, y)\n\n            if (node !== undefined) {\n                showTooltipFromEvent(createElement(tooltip, { node }), event, 'left')\n                onMouseMove?.(node, event)\n            } else {\n                hideTooltip()\n            }\n        },\n        [canvasEl, nodes, margin, showTooltipFromEvent, hideTooltip, tooltip, onMouseMove]\n    )\n\n    const handleMouseLeave = useCallback(() => {\n        hideTooltip()\n    }, [hideTooltip])\n\n    const handleClick = useCallback(\n        (event: MouseEvent<HTMLCanvasElement>) => {\n            if (canvasEl.current === null) return\n\n            const [x, y] = getRelativeCursor(canvasEl.current, event)\n            const node = findNodeUnderCursor(nodes, margin, x, y)\n\n            if (node === undefined) return\n\n            onClick?.(node, event)\n        },\n        [canvasEl, nodes, margin, onClick]\n    )\n\n    return (\n        <canvas\n            ref={mergeRefs(canvasEl, forwardedRef)}\n            width={outerWidth * pixelRatio}\n            height={outerHeight * pixelRatio}\n            style={{\n                width: outerWidth,\n                height: outerHeight,\n            }}\n            onMouseEnter={isInteractive ? handleMouseHover : undefined}\n            onMouseMove={isInteractive ? handleMouseHover : undefined}\n            onMouseLeave={isInteractive ? handleMouseLeave : undefined}\n            onClick={isInteractive ? handleClick : undefined}\n            role={role}\n            aria-label={ariaLabel}\n            aria-labelledby={ariaLabelledBy}\n            aria-describedby={ariaDescribedBy}\n        />\n    )\n}\n\nexport const TreeMapCanvas = forwardRef(\n    <Datum extends object = DefaultTreeMapDatum>(\n        {\n            theme,\n            isInteractive = canvasDefaultProps.isInteractive,\n            animate = canvasDefaultProps.animate,\n            motionConfig = canvasDefaultProps.motionConfig,\n            renderWrapper,\n            ...props\n        }: TreeMapCanvasProps<Datum>,\n        ref: Ref<HTMLCanvasElement>\n    ) => (\n        <Container\n            isInteractive={isInteractive}\n            animate={animate}\n            motionConfig={motionConfig}\n            theme={theme}\n            renderWrapper={renderWrapper}\n        >\n            <InnerTreeMapCanvas<Datum>\n                {...props}\n                isInteractive={isInteractive}\n                forwardedRef={ref}\n            />\n        </Container>\n    )\n) as <Datum extends object = DefaultTreeMapDatum>(\n    props: WithChartRef<TreeMapCanvasProps<Datum>, HTMLCanvasElement>\n) => ReactElement\n","import { forwardRef, Ref, ReactElement } from 'react'\nimport { ResponsiveWrapper, ResponsiveProps, WithChartRef } from '@nivo/core'\nimport { DefaultTreeMapDatum, TreeMapCanvasProps } from './types'\nimport { TreeMapCanvas } from './TreeMapCanvas'\n\nexport const ResponsiveTreeMapCanvas = forwardRef(\n    <Datum extends object = DefaultTreeMapDatum>(\n        {\n            defaultWidth,\n            defaultHeight,\n            onResize,\n            debounceResize,\n            ...props\n        }: ResponsiveProps<TreeMapCanvasProps<Datum>>,\n        ref: Ref<HTMLCanvasElement>\n    ) => (\n        <ResponsiveWrapper\n            defaultWidth={defaultWidth}\n            defaultHeight={defaultHeight}\n            onResize={onResize}\n            debounceResize={debounceResize}\n        >\n            {({ width, height }) => (\n                <TreeMapCanvas<Datum> {...props} width={width} height={height} ref={ref} />\n            )}\n        </ResponsiveWrapper>\n    )\n) as <Datum extends object = DefaultTreeMapDatum>(\n    props: WithChartRef<ResponsiveProps<TreeMapCanvasProps<Datum>>, HTMLCanvasElement>\n) => ReactElement\n"],"names":["svgNodeTransform","x","y","to","htmlNodeTransform","svgLabelTransform","rotation","htmlLabelTransform","htmlParentLabelTransform","TreeMapNode","memo","_ref","node","animatedProps","borderWidth","enableLabel","enableParentLabel","labelSkipSize","theme","useTheme","showLabel","isLeaf","Math","min","width","height","showParentLabel","isParent","_jsxs","jsxs","animated","g","transform","children","_jsx","rect","id","v","max","fill","color","strokeWidth","stroke","borderColor","fillOpacity","opacity","onMouseEnter","onMouseMove","onMouseLeave","onClick","jsx","Text","textAnchor","dominantBaseline","style","_extends","labels","text","labelTextColor","pointerEvents","labelOpacity","labelX","labelY","labelRotation","label","parentLabelTextColor","parentLabelOpacity","parentLabelX","parentLabelY","parentLabelRotation","parentLabel","TreeMapNodeTooltip","BasicTooltip","value","formattedValue","enableChip","TreeMapHtmlNode","div","path","replace","boxSizing","position","top","left","borderStyle","overflow","background","span","display","justifyContent","alignItems","whiteSpace","transformOrigin","commonDefaultProps","layers","identity","tile","leavesOnly","innerPadding","outerPadding","colors","scheme","colorBy","nodeOpacity","from","modifiers","orientLabel","parentLabelSize","parentLabelPosition","parentLabelPadding","isInteractive","tooltip","role","animate","motionConfig","svgDefaultProps","nodeComponent","defs","htmlDefaultProps","canvasDefaultProps","pixelRatio","window","devicePixelRatio","tileByType","binary","treemapBinary","dice","treemapDice","slice","treemapSlice","sliceDice","treemapSliceDice","squarify","treemapSquarify","useTreeMap","_ref3","data","_ref3$identity","_ref3$value","valueFormat","_ref3$leavesOnly","_ref3$tile","_ref3$innerPadding","_ref3$outerPadding","_ref3$label","_ref3$orientLabel","_ref3$enableParentLab","_ref3$parentLabel","_ref3$parentLabelSize","_ref3$parentLabelPosi","_ref3$parentLabelPadd","_ref3$colors","_ref3$colorBy","_ref3$nodeOpacity","_ref3$borderColor","_ref3$labelTextColor","_ref3$parentLabelText","getIdentity","usePropertyAccessor","getValue","formatValue","useValueFormatter","getLabel","getParentLabel","layout","useMemo","treemap","d3Treemap","size","round","paddingInner","paddingOuter","startCase","useTreeMapLayout","hierarchy","_ref2","root","sum","useHierarchy","rawNodes","cloneDeep","leaves","descendants","nodes","map","rawNode","_computeNodeIdAndPath","ancestors","ancestor","reverse","join","pathComponents","computeNodeIdAndPath","omit","x0","y0","x1","y1","treeDepth","depth","treeHeight","getColor","useOrdinalColorScale","getBorderColor","useInheritedColor","getLabelTextColor","getParentLabelTextColor","nodesWithStyles","nodeWithStyles","useInteractiveTreeMapNodes","_ref4","_useTooltip","useTooltip","showTooltipFromEvent","hideTooltip","showTooltip","useCallback","event","createElement","handleMouseEnter","handleMouseMove","handleMouseLeave","handleClick","useCustomLayerProps","_ref5","getAnimatedNodeProps","getEndingAnimatedNodeProps","TreeMapNodes","nodesWithHandlers","_useMotionConfig","useMotionConfig","springConfig","config","transition","useTransition","keys","initial","enter","update","leave","immediate","_Fragment","key","InnerTreeMap","_ref$identity","_ref$value","_ref$tile","_ref$nodeComponent","_ref$innerPadding","_ref$outerPadding","_ref$leavesOnly","partialMargin","margin","_ref$layers","_ref$colors","_ref$colorBy","_ref$nodeOpacity","_ref$borderWidth","_ref$borderColor","_ref$defs","_ref$fill","_ref$enableLabel","_ref$label","_ref$labelTextColor","_ref$orientLabel","_ref$labelSkipSize","_ref$enableParentLabe","_ref$parentLabel","_ref$parentLabelSize","_ref$parentLabelPosit","_ref$parentLabelPaddi","_ref$parentLabelTextC","_ref$isInteractive","_ref$tooltip","ariaLabel","ariaLabelledBy","ariaDescribedBy","forwardedRef","_useDimensions","useDimensions","innerWidth","innerHeight","outerWidth","outerHeight","layerById","includes","customLayerProps","boundDefs","bindDefs","SvgWrapper","ref","layer","i","_layerById$layer","Fragment","TreeMap","forwardRef","_ref2$isInteractive","_ref2$animate","_ref2$motionConfig","renderWrapper","props","_objectWithoutPropertiesLoose","_excluded","Container","ResponsiveTreeMap","defaultWidth","defaultHeight","onResize","debounceResize","ResponsiveWrapper","InnerTreeMapHtml","TreeMapHtml","ResponsiveTreeMapHtml","findNodeUnderCursor","find","isCursorInRect","InnerTreeMapCanvas","_ref$pixelRatio","canvasEl","useRef","useEffect","current","ctx","getContext","scale","fillStyle","fillRect","translate","forEach","strokeStyle","lineWidth","strokeRect","textAlign","textBaseline","setCanvasFont","rotate","save","degreesToRadians","drawCanvasText","String","restore","handleMouseHover","_getRelativeCursor","getRelativeCursor","undefined","_getRelativeCursor2","mergeRefs","TreeMapCanvas","ResponsiveTreeMapCanvas"],"mappings":"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"}